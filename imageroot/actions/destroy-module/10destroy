#!/usr/bin/env python3

import json
import sys
import subprocess
import os

# Clean up module on destruction
data = json.load(sys.stdin)

try:
    # Stop the service
    subprocess.run(['systemctl', '--user', 'stop', 'qdrant.service'], check=True)
except subprocess.CalledProcessError:
    pass  # Service might not be running

# Note: In a real NS8 environment, you would use the agent module
# to interact with Traefik and clean up routes properly.
# This is a simplified version for syntax checking.

try:
    # Clean up volumes and data
    subprocess.run(['podman', 'volume', 'rm', '-f', 'qdrant-data'], check=True)
except subprocess.CalledProcessError:
    pass  # Volume might not exist

print("Module destroyed successfully")
